package com.microservice.example.orderservices.service;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.web.client.RestTemplate;

import com.microservice.example.orderservices.common.PaymentTO;
import com.microservice.example.orderservices.common.TranscationRequest;
import com.microservice.example.orderservices.dao.OrderDAO;
import com.microservice.example.orderservices.entity.OrderTO;

@Service
public class OrderService {
	
	@Autowired OrderDAO daoLayer;
	@Autowired RestTemplate restTemplate;
	
	public TranscationResponse saveOrder(TranscationRequest obj)
	{
       PaymentTO pay =	obj.getPayment();	
       pay.setOrderId(obj.getOrder().getOrderId());
       PaymentTO payy=restTemplate.postForObject("http://localhost:9102/payment/savePayment", pay, PaymentTO.class);
       System.err.println(payy.toString());
		return daoLayer.save(obj.getOrder());
	}

}
